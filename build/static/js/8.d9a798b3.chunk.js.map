{"version":3,"sources":["lib/chats/chat-subjects.js","stores/AbstractChatStore.js","stores/PublicChatStore.js","lib/util.js","images/img_avatar.png","components/AppSplitter/AppSplitter.module.css","stores/UserStore.js","stores/AuthStore.js","components/AppSplitter/edges.svg","lib/authentication.js","components/AppSplitter/AppSplitter.js","components/AppliedRoute/AppliedRoute.js","components/UnauthenticatedRoute/UnauthenticatedRoute.js","components/AuthenticatedRoute/AuthenticatedRoute.js","components/Routes/Routes.js","components/App/App.js","lib/user.js","lib/chats/chat-meta.js","lib/chats/chat-thread.js"],"names":["ChatSubject","title","slug","parent","isLeaf","id","Object","classCallCheck","this","sub","undefined","AbsctractChatStore","nestChatSubject","subject","t","arguments","length","path","split","_loop","i","find","child","newSlug","push","err","Error","amountOfSlashes","str","replace","amountOfSlashesSort","a","b","_this","EventEmitter","PublicChatStore","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","init","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","D_Apps_projectmegaindia_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","mark","_callee","wrap","_context","prev","next","getChatsMetas","chatMeta","sent","console","log","isReady","emit","stop","getChatMetaIds","_callee2","response","json","_context2","fetch","abrupt","keys","getChatMetaItem","meta","getField","_ref3","_callee3","key","firebase","snapshot","_context3","firebaseReady","database","ref","concat","once","val","_x","_x2","apply","getSingleChatMeta","_ref4","_callee4","_ref5","_ref6","_context4","Promise","all","map","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","ChatMeta","_x3","_callee5","ids","_context5","getChatSubjectsFlat","_callee6","_context6","slice","sort","getChatSubjects","_callee7","subjectsArray","subjects","_context7","forEach","getChatThread","_ref10","_callee8","chatThread","_context8","threads","ChatThread","fromChatMeta","_x4","AbstractChatStore","__webpack_exports__","__webpack_require__","d","debounce","deviceReady","func","wait","immediate","timeout","context","args","callNow","clearTimeout","setTimeout","resolve","reject","window","cordova","document","addEventListener","DOMContentLoaded","module","exports","AppSplitter","firstListItem","stores_UserStore","UserStore","possibleConstructorReturn","getPrototypeOf","checkIfUserDataExists","uid","then","catch","AuthStore","loginWithEmailPassword","_ref","asyncToGenerator","regenerator_default","email","password","errorMessage","auth","signInWithEmailAndPassword","t0","code","message","ons","notification","alert","getUser","registerWithEmailPassword","_ref2","createUserWithEmailAndPassword","signInAnonymously","user","loggedIn","getCurrentUser","warn","isLoggedIn","isAuthenticated","userHasAuthenticated","getUserInfo","action","authenticate","provider","_x5","userDataObserver","off","getProfileImage","photoURL","set","displayName","userData","on","handleUserDataSnapshot","setPhotoURL","readyPromise","p","firebase_app__WEBPACK_IMPORTED_MODULE_0__","firebase_app__WEBPACK_IMPORTED_MODULE_0___default","n","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","currentUser","onAuthStateChanged","tst","GoogleAuthProvider","setPersistence","Auth","Persistence","LOCAL","getRedirectResult","result","credential","accessToken","signInWithRedirect","error","props","handleClose","setState","isOpen","openUrl","url","history","state","_this2","toggleOnsMenu","react_default","createElement","react_onsenui","side","width","collapse","animation","onClose","className","styles","style","backgroundImage","headerBg","height","onClick","children","Component","windowDimensions","take","windowWidth","innerWidth","windowHeight","innerHeight","onResize","withRouter","AppliedRoute","C","component","cProps","rest","objectWithoutProperties","Route","assign","render","UnauthenticatedRoute","hashQuery","location","hash","redirect","queryString","parse","Redirect","to","AuthenticatedRoute","pathname","search","Introduction","asyncComponent","e","bind","NoEntry","NewRouteOrder","Home","RoutesOffersOverview","RouteDetail","PublicChat","PersonalChat","PersonalChatsOverview","NotFound","RouteOfferFlowDiagram","Routes","childProps","Switch","exact","components_AppSplitter_AppSplitter","platform","select","register","nlLocale","App","handleAnyStoreChange","removeListener","HashRouter","components_Routes_Routes","Loading","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_Apps_projectmegaindia_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","userUid","storage","getDownloadURL","defaultAvatar","getDisplayName","authStoreUserDataDisplayName","public","userAuthDisplayName","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_ChatMeta","threadObserver","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","value"],"mappings":"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","file":"static/js/8.d9a798b3.chunk.js","sourcesContent":["\r\n\r\nexport class ChatSubject {\r\n    constructor(title, slug, parent, isLeaf, id) {\r\n        this.title = title;\r\n        this.slug = slug;\r\n        this.parent = parent;\r\n        this.sub = isLeaf ? undefined : [];\r\n        this.isLeaf = isLeaf;\r\n        this.id = id;\r\n    }\r\n}\r\n\r\n","import { ChatSubject } from \"../lib/chats/chat-subjects\";\r\nimport { EventEmitter } from \"events\";\r\n\r\nexport default class AbsctractChatStore extends EventEmitter {\r\n    nestChatSubject = (subject, subjects = {}) => {\r\n        let t = { sub: subjects };\r\n        const path = subject.slug.split('/');\r\n        try {\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                t = t.sub.find(child => child.slug === path[i]);\r\n            }\r\n            const newSlug = path[path.length - 1];\r\n            t.sub.push(new ChatSubject(subject.title, newSlug, t, subject.isLeaf, subject.id));\r\n        } catch (err) {\r\n            throw new Error('Invalid Graph!', err);\r\n        }\r\n    }\r\n\r\n    amountOfSlashes = str => str.replace(/[^\\/]/g, '').length;\r\n    amountOfSlashesSort = (a, b) => this.amountOfSlashes(a.slug) - this.amountOfSlashes(b.slug);\r\n}","import { firebaseReady } from \"../lib/authentication\";\r\nimport { ChatMeta } from \"../lib/chats/chat-meta\";\r\nimport { ChatThread } from \"../lib/chats/chat-thread\";\r\nimport AbstractChatStore from \"./AbstractChatStore\";\r\n\r\nclass PublicChatStore extends AbstractChatStore {\r\n    constructor() {\r\n        super();\r\n\r\n        this.threads = {};\r\n        this.init();\r\n    }\r\n\r\n    init = async () => {\r\n        this.chatMeta = await this.getChatsMetas();\r\n        console.log(this.chatMeta);\r\n        this.isReady = true;\r\n        this.emit('change');\r\n    }\r\n\r\n    getChatMetaIds = async () => {\r\n        const response = await fetch(`https://megaindia-990a4.firebaseio.com/chats/public.json?shallow=true`);\r\n        const json = await response.json();\r\n        return Object.keys(json);\r\n    }\r\n\r\n    getChatMetaItem = slug => {\r\n        return this.chatMeta.find(meta => slug === meta.slug)\r\n    }\r\n\r\n    getField = async (id, key) => {\r\n        const firebase = await firebaseReady;\r\n        console.log(firebase);\r\n        const snapshot = await firebase.database().ref(`/chats/public/${id}/${key}`).once('value');\r\n        return snapshot.val();\r\n    }\r\n\r\n    getSingleChatMeta = async (id) => {\r\n        await firebaseReady;\r\n        const [title, slug, isLeaf] = await Promise.all(\r\n            ['title', 'slug', 'isLeaf'].map(key => this.getField(id, key))\r\n        );\r\n        return new ChatMeta(title, isLeaf, slug, id);\r\n    }\r\n\r\n    getChatsMetas = async () => {\r\n        await firebaseReady;\r\n        const ids = await this.getChatMetaIds();\r\n        return await Promise.all(ids.map(this.getSingleChatMeta));\r\n    };\r\n\r\n    getChatSubjectsFlat = async () => {\r\n        const chatMeta = await this.getChatsMetas();\r\n        return chatMeta.slice().sort(this.amountOfSlashesSort);\r\n    };\r\n    \r\n    getChatSubjects = async () => {\r\n        const subjectsArray = await this.getChatSubjectsFlat();\r\n        const subjects = [];\r\n        subjectsArray.forEach(subject => this.nestChatSubject(subject, subjects));\r\n        return subjects;\r\n    };\r\n\r\n    getChatThread = async chatMeta => {\r\n        if (chatMeta === null) throw new Error('Invalid chatmeta');\r\n        if (this.threads[chatMeta.id]) return this.threads[chatMeta.id];\r\n        const firebase = await firebaseReady;\r\n        const chatThread = ChatThread.fromChatMeta(chatMeta, firebase.database().ref(`/chats/public/${chatMeta.id}/thread`));\r\n        this.threads[chatMeta.id] = chatThread;\r\n        return chatThread;  \r\n    };\r\n}\r\n\r\nexport default new PublicChatStore();\r\n","import * as ons from 'onsenui';\r\n\r\nexport const html2text = html => {\r\n\treturn html.replace(/<style([\\s\\S]*?)<\\/style>/gi, '')\r\n\t\t.replace(/<script([\\s\\S]*?)<\\/script>/gi, '')\r\n\t\t.replace(/<\\/div>/ig, '\\n')\r\n\t\t.replace(/<\\/li>/ig, '\\n')\r\n\t\t.replace(/<li>/ig, '  *  ')\r\n\t\t.replace(/<\\/ul>/ig, '\\n')\r\n\t\t.replace(/<\\/p>/ig, '\\n')\r\n\t\t.replace(/<br\\s*[\\/]?>/gi, \"\\n\")\r\n\t\t.replace(/<[^>]+>/ig, '');\r\n};\r\n\r\nexport const debounce = (func, wait, immediate) => {\r\n\tvar timeout;\r\n\treturn function () {\r\n\t\tvar context = this, args = arguments;\r\n\t\tvar later = function () {\r\n\t\t\ttimeout = null;\r\n\t\t\tif (!immediate) func.apply(context, args);\r\n\t\t};\r\n\t\tvar callNow = immediate && !timeout;\r\n\t\tclearTimeout(timeout);\r\n\t\ttimeout = setTimeout(later, wait);\r\n\t\tif (callNow) func.apply(context, args);\r\n\t};\r\n}\r\n\r\nexport const excerpt = (str, maxlen) => {\r\n\tstr = str || '';\r\n\tif (str.length > maxlen) return str.slice(0, maxlen).trimRight() + '...';\r\n\telse return str;\r\n}\r\n\r\nexport const objectAssign = (obj) => {\r\n\tvar newObj = {};\r\n\tfor (var key in obj) {\r\n\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\tvar element = obj[key];\r\n\t\t\tnewObj[key] = element;\r\n\t\t}\r\n\t}\r\n\treturn newObj;\r\n}\r\n\r\nexport const arrayEqual = (arr1, arr2) => {\r\n\tif (arr1.length !== arr2.length) return false;\r\n\tfor (var i = 0; i < arr1.length; i++) {\r\n\t\tif (arr1[i] !== arr2[i]) return false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nexport const onEnterDo = (input, func) => {\r\n\tinput.addEventListener('keydown', function (e) {\r\n\t\tif (e.key === 'Enter') func(e);\r\n\t});\r\n}\r\n\r\nexport const escapeRegExp = string => {\r\n\treturn string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\r\n}\r\n\r\nexport const validURL = value => {\r\n\treturn /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(value);\r\n}\r\n\r\nexport const clearChildren = parent => {\r\n\twhile (parent.firstChild) {\r\n\t\tparent.removeChild(parent.firstChild);\r\n\t}\r\n\treturn parent;\r\n}\r\n\r\nexport const cloneWithoutChildren = parent => {\r\n\tvar cNode = parent.cloneNode(false);\r\n\tparent.parentNode.replaceChild(cNode, parent);\r\n\treturn cNode;\r\n}\r\n\r\nexport const byteSizeFormat = (bytes, size) => {\r\n\tvar names = size === 'long'\r\n\t\t? ['bytes', 'kilo bytes', 'mega bytes', 'giga bytes', 'terra bytes']\r\n\t\t: ['bytes', 'kb', 'mb', 'gb', 'tb'];\r\n\tif (bytes <= 0) {\r\n\t\treturn '0 ' + names[0];\r\n\t}\r\n\tvar index = Math.min(\r\n\t\tMath.floor(Math.log(bytes) / Math.log(1024)),\r\n\t\tnames.length\r\n\t);\r\n\tvar units = Math.round(bytes / Math.pow(1024, index));\r\n\treturn units + ' ' + names[index];\r\n}\r\n\r\nexport const strRepeat = (str, n) => {\r\n\tif (n === 0) return '';\r\n\tn = n || 1;\r\n\treturn Array(n + 1).join(str);\r\n}\r\n\r\nexport const logError = err => {\r\n\tconsole.error(err);\r\n\twindow.setTimeout(() => { throw err; }, 0);\r\n};\r\n\r\nexport const getParameterByName = (name, url) => {\r\n    if (!url) url = window.location.href;\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n        results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\n\r\nexport const throttle = (func, limit) => {\r\n\tlet inThrottle;\r\n\treturn function () {\r\n\t\tconst args = arguments;\r\n\t\tconst context = this;\r\n\t\tif (!inThrottle) {\r\n\t\t\tfunc.apply(context, args);\r\n\t\t\tinThrottle = true;\r\n\t\t\tsetTimeout(() => inThrottle = false, limit);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport const deviceReady = new Promise((resolve, reject) => {\r\n\tif (window.cordova) {\r\n\t\t// The deviceready event behaves somewhat differently from others. \r\n\t\t// Any event handler registered after the deviceready event fires has its callback function called immediately.\r\n\t\tdocument.addEventListener('deviceready', resolve);\t\r\n\t} else if (window.DOMContentLoaded) {\r\n\t\tresolve();\r\n\t} else {\r\n\t\twindow.addEventListener('DOMContentLoaded', resolve);\r\n\t}\r\n});\r\n","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AppSplitter\":\"AppSplitter_AppSplitter__zWg4S\",\"firstListItem\":\"AppSplitter_firstListItem__2D32R\"};","import { EventEmitter } from \"events\";\r\nimport { firebaseReady } from \"../lib/authentication\";\r\n\r\nclass UserStore extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    checkIfUserDataExists = uid => {\r\n        return new Promise((resolve, reject) => {\r\n            firebaseReady.then(firebase => {\r\n                const ref = firebase.database().ref(`/users/${uid}`);\r\n                ref.once('value', function (snapshot) {\r\n                    return resolve(snapshot.val() !== null);\r\n                }, reject);\r\n            }).catch(reject);\r\n        });\r\n    }\r\n}\r\n\r\nexport default new UserStore();\r\n","import { EventEmitter } from \"events\";\r\nimport { authenticate, getCurrentUser, isLoggedIn, firebaseReady } from \"../lib/authentication\";\r\nimport { getProfileImage } from \"../lib/user\";\r\nimport UserStore from \"./UserStore\";\r\nimport firebase from 'firebase/app';\r\nimport ons from 'onsenui';\r\n\r\nclass AuthStore extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.isAuthenticated = false;\r\n        this.userHasAuthenticated = false;\r\n        this.readyPromise = this.getUser();\r\n    }\r\n\r\n    loginWithEmailPassword = async (email, password) => {\r\n        try {\r\n            await firebase.auth().signInWithEmailAndPassword(email, password);\r\n        } catch (error) {\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // ...\r\n            ons.notification.alert('Unable to login: ' + errorMessage);\r\n        }\r\n        await this.getUser();\r\n\r\n    }\r\n\r\n    registerWithEmailPassword = async (email, password) => {\r\n        try {\r\n            await firebase.auth().createUserWithEmailAndPassword(email, password);\r\n        } catch (error) {\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // ...\r\n            ons.notification.alert('Unable to login: ' + errorMessage);\r\n        }\r\n        await this.getUser();\r\n    }\r\n\r\n    signInAnonymously = async () => {\r\n        try {\r\n            await firebase.auth().signInAnonymously();\r\n        } catch (error) {\r\n            // Handle Errors here.\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            // ...\r\n            ons.notification.alert('Unable to sign in: ' + errorMessage);\r\n        }\r\n        await this.getUser();\r\n    }\r\n\r\n    getUser = async () => {\r\n        console.log('get user');\r\n        const user = await getCurrentUser();\r\n        if (!user) console.warn('user is falsy after getting the current user...', user);\r\n        const loggedIn = await isLoggedIn();\r\n        this.user = user;\r\n        this.isAuthenticated = loggedIn;\r\n        this.userHasAuthenticated = true;\r\n        if (this.user) await this.getUserInfo();\r\n        this.emit('change', { action: 'GET_USER' });\r\n    }\r\n\r\n    authenticate = (provider) => authenticate(provider).then(async user => {\r\n        if (!user) console.warn('user is falsy after authenticating...', user);\r\n        this.isAuthenticated = true;\r\n        this.user = user;\r\n        await this.getUserInfo();\r\n        this.emit('change');\r\n        return user;\r\n    });\r\n\r\n    getUserInfo = async () => {\r\n        if (this.userDataObserver) this.userDataObserver.off();\r\n        await firebaseReady;\r\n        this.photoURL = await getProfileImage(this.user.uid);\r\n        this.userDataObserver = firebase.database().ref(`/users/${this.user.uid}`)\r\n        const userDataExists = await UserStore.checkIfUserDataExists(this.user.uid);\r\n        if (userDataExists === false) {\r\n            const ref = firebase.database().ref(`/users/${this.user.uid}/public`);\r\n            await ref.set({\r\n                displayName: this.user.displayName || 'Anonymous'\r\n            });\r\n        }\r\n        const snapshot = await this.userDataObserver.once('value')\r\n        this.userData = snapshot.val();\r\n        this.userHasAuthenticated = true;\r\n        this.emit('change');\r\n        this.userDataObserver.on('value', this.handleUserDataSnapshot);\r\n    }\r\n\r\n    handleUserDataSnapshot = snapshot => {\r\n        this.userData = snapshot.val();\r\n        this.emit('change');\r\n    }\r\n\r\n    setPhotoURL = photoURL => {\r\n        this.photoURL = photoURL;\r\n        this.emit('change');\r\n    }\r\n}\r\n\r\nexport default new AuthStore();\r\n","module.exports = __webpack_public_path__ + \"static/media/edges.bc73b328.svg\";","import firebase from 'firebase/app';\r\nimport * as ons from 'onsenui';\r\nimport { deviceReady } from './util';\r\n\r\nexport const firebaseReady = deviceReady.then(() => {\r\n    // Initialize Firebase\r\n    var config = {\r\n        apiKey: \"AIzaSyB_M3x8TONbKzPOyl7RYfZ1cvjZmWVvgv8\",\r\n        authDomain: \"megaindia-990a4.firebaseapp.com\",\r\n        databaseURL: \"https://megaindia-990a4.firebaseio.com\",\r\n        projectId: \"megaindia-990a4\",\r\n        storageBucket: \"megaindia-990a4.appspot.com\",\r\n        messagingSenderId: \"429451926912\"\r\n    };\r\n    firebase.initializeApp(config);\r\n    return firebase;\r\n});\r\n\r\nexport const getCurrentUser = () => firebaseReady.then(firebase => {\r\n    if (firebase.auth().currentUser === null) {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().onAuthStateChanged(function (user) {\r\n                resolve(user);\r\n            });\r\n        })\r\n    } else {\r\n        return firebase.auth().currentUser;\r\n    }\r\n});\r\n\r\nexport const isLoggedIn = () => getCurrentUser().then(user => {\r\n    return !!user;\r\n})\r\n\r\ngetCurrentUser().then(tst => console.log('aabccdef', tst));\r\n\r\n// default authenticate flow\r\nexport const authenticate = provider => new Promise((resolve, reject) => {\r\n    if (!provider) provider = new firebase.auth.GoogleAuthProvider();\r\n    getCurrentUser().then(user => {\r\n        if (user) {\r\n            resolve(user);\r\n        }\r\n        else {\r\n            firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\r\n                return firebase.auth().getRedirectResult();\r\n            }).then(result => {\r\n                if (result.credential) {\r\n                    // This gives you a Google Access Token.\r\n                    // You can use it to access the Google API.\r\n                    var token = result.credential.accessToken;\r\n                    // The signed-in user info.\r\n                    var user = result.user;\r\n                    // ...\r\n                    resolve(result);\r\n                } else {\r\n                    firebase.auth().signInWithRedirect(provider).then(() => {\r\n                        return firebase.auth().getRedirectResult();\r\n                    }).then(result => {\r\n                        // This gives you a Google Access Token.\r\n                        // You can use it to access the Google API.\r\n                        var token = result.credential.accessToken;\r\n                        // The signed-in user info.\r\n                        var user = result.user;\r\n                        // ...\r\n                        resolve(result);\r\n                    }).catch(error => {\r\n                        // Handle Errors here.\r\n                        var errorCode = error.code;\r\n                        var errorMessage = error.message;\r\n                        reject(error);\r\n                    });\r\n                }\r\n            }).catch(error => {\r\n                // Handle Errors here.\r\n                var errorCode = error.code;\r\n                var errorMessage = error.message;\r\n                reject(error);\r\n            });\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\nimport styles from './AppSplitter.module.css';\nimport { Splitter, SplitterContent, SplitterSide, Page, List, ListHeader, ListItem, ListTitle } from 'react-onsenui';\nimport windowDimensions from 'react-window-dimensions';\nimport headerBg from './edges.svg';\nimport { debounce } from '../../lib/util';\nimport { withRouter } from 'react-router-dom';\n\nclass AppSplitter extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n            isOpen: false\n        };\n\n    }\n\n    componentWillMount() {\n        window.toggleOnsMenu = () => {\n            this.setState({\n                isOpen: !this.state.isOpen\n            });\n        }\n    }\n\n    componentWillUnmount() {\n    }\n\n    handleClose = () => {\n        this.setState({ isOpen: false });\n    }\n\n    openUrl = url => () => {\n        this.props.history.push(url);\n        this.setState({\n            isOpen: false\n        });\n    }\n\n    render() {\n        console.log(this.props);\n        return (\n            <Splitter>\n                <SplitterSide\n                    side=\"left\"\n                    width={250}\n                    collapse={true}\n                    animation=\"default\"\n                    isOpen={this.state.isOpen}\n                    onClose={this.handleClose}>\n                    <Page>\n                        <List>\n                            <ListItem className={styles.firstListItem} style={{\n                                backgroundImage: `url('${headerBg}')`,\n                                height: 200\n                            }}>\n\n                            </ListItem>\n                            <ListItem onClick={this.openUrl('/new-route')}>\n                                Nieuwe Route\n                            </ListItem>\n                            <ListItem onClick={this.openUrl('/routes-list')}>\n                                Bekijk Routes\n                            </ListItem>\n                            <ListItem onClick={this.openUrl('/chats/personal')}>\n                                Chats\n                            </ListItem>\n                        </List>\n                    </Page>\n                </SplitterSide>\n                <SplitterContent>\n                    {this.props.children}\n                </SplitterContent>\n            </Splitter>\n        );\n    }\n}\n\nexport default windowDimensions({\n    take: () => ({ windowWidth: window.innerWidth, windowHeight: window.innerHeight }),\n    debounce: onResize => debounce(onResize, 100),\n})(withRouter(AppSplitter));\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\n\nexport default ({ component: C, props: cProps, ...rest }) =>\n  <Route {...rest} render={props => <C {...props} {...cProps} />} />;","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport queryString from 'query-string';\n\nexport default ({ component: C, props: cProps, ...rest }) => {\n    const hashQuery = window.location.hash.split('?')[1];\n    const redirect = queryString.parse(hashQuery).redirect;\n    return (\n      <Route\n        {...rest}\n        render={props =>\n          !cProps.isAuthenticated\n            ? <C {...props} {...cProps} />\n            : <Redirect\n                to={redirect === \"\" || redirect === null ? \"/\" : redirect}\n              />}\n      />\n    );\n  };","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport default ({ component: C, props: cProps, ...rest }) =>\n    <Route\n        {...rest}\n        render={props =>\n            cProps.isAuthenticated\n                ? <C {...props} {...cProps} />\n                : <Redirect\n                    to={`/login?redirect=${props.location.pathname}${props.location\n                        .search}`}\n                />}\n    />;","import React, { Component } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport './Routes.css';\n\nimport AppSplitter from '../AppSplitter/AppSplitter';\nimport Loader from '../Loader/Loader';\nimport AppliedRoute from \"../AppliedRoute/AppliedRoute\";\nimport UnauthenticatedRoute from '../UnauthenticatedRoute/UnauthenticatedRoute';\nimport AuthenticatedRoute from '../AuthenticatedRoute/AuthenticatedRoute';\nimport asyncComponent from '../AsyncComponent/AsyncComponent';\n\n// import Introduction from '../Introduction/Introduction';\n// import NoEntry from '../NoEntry/NoEntry';\n// import NewRouteOrder from '../NewRouteOrder/NewRouteOrder';\n// import Home from '../Home/Home';\n// import RoutesOffersOverview from '../RoutesOffersOverview/RoutesOffersOverview';\n// import RouteDetail from '../RouteDetail/RouteDetail';\n// import PublicChat from '../PublicChat/PublicChat';\n// import PersonalChat from '../PersonalChat/PersonalChat';\n// import PersonalChatsOverview from '../PersonalChatsOverview/PersonalChatsOverview';\n// import NotFound from '../NotFound/NotFound';\n// import RouteOfferFlowDiagram from '../RouteOfferFlowDiagram/RouteOfferFlowDiagram';\n\nconst Introduction = asyncComponent(() => import('../Introduction/Introduction'));\nconst NoEntry = asyncComponent(() => import('../NoEntry/NoEntry'));\nconst NewRouteOrder = asyncComponent(() => import('../NewRouteOrder/NewRouteOrder'));\nconst Home = asyncComponent(() => import('../Home/Home'));\nconst RoutesOffersOverview = asyncComponent(() => import('../RoutesOffersOverview/RoutesOffersOverview'));\nconst RouteDetail = asyncComponent(() => import('../RouteDetail/RouteDetail'));\nconst PublicChat = asyncComponent(() => import('../PublicChat/PublicChat'));\nconst PersonalChat = asyncComponent(() => import('../PersonalChat/PersonalChat'));\nconst PersonalChatsOverview = asyncComponent(() => import('../PersonalChatsOverview/PersonalChatsOverview'));\nconst NotFound = asyncComponent(() => import('../NotFound/NotFound'));\nconst RouteOfferFlowDiagram = asyncComponent(() => import('../RouteOfferFlowDiagram/RouteOfferFlowDiagram'));\n\nclass Routes extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n        };\n\n    }\n\n    componentWillMount() {\n    }\n\n    componentWillUnmount() {\n    }\n\n    render() {\n        const { childProps } = this.props;\n        console.log(childProps);\n        return (\n            <Switch>\n                {/* {this.state.userHasAuthenticated\n                    ? <div>\n                        {this.state.isAuthenticated\n                            ? <AppSplitter>\n                                <PageRoutes />\n                            </AppSplitter>\n                            : <Switch>\n                                <Route exact path=\"/no-entry\" component={NoEntry} />\n                                <Route component={Introduction} />\n                            </Switch>}\n                    </div>\n                    : <Loading />}\n                Routes Component */}\n\n                <UnauthenticatedRoute exact path=\"/login\" component={Introduction} props={childProps} />\n                <UnauthenticatedRoute exact path=\"/no-entry\" component={NoEntry} props={childProps} />\n\n                <AppSplitter>\n                    <AuthenticatedRoute exact path=\"/\" component={Home} props={childProps} />\n                    <AuthenticatedRoute exact path=\"/new-route\" component={NewRouteOrder} props={childProps} />\n                    <AuthenticatedRoute exact path=\"/routes-list\" component={RoutesOffersOverview} props={childProps} />\n                    <AuthenticatedRoute exact path=\"/route/:id\" component={RouteDetail} props={childProps} />\n                    <AuthenticatedRoute exact path=\"/chats/personal\" component={PersonalChatsOverview} props={childProps} />\n                    <AuthenticatedRoute\n                        exact\n                        path=\"/chats/public/*\"\n                        props={childProps}\n                        render={PublicChat} />\n                    <AuthenticatedRoute\n                        exact\n                        path=\"/chats/personal/*\"\n                        props={childProps}\n                        render={PersonalChat} />\n                </AppSplitter>\n\n                <AppliedRoute exact path=\"/flow/routeorder\" component={RouteOfferFlowDiagram} />\n                <AppliedRoute component={NotFound} />\n            </Switch>\n        );\n    }\n}\n\nexport default Routes;\n","import React, { Component } from 'react';\nimport ons from 'onsenui';\nimport { register } from 'timeago.js';\nimport nlLocale from 'timeago.js/lib/lang/nl';\nimport { HashRouter } from 'react-router-dom';\nimport './App.css';\nimport AuthStore from '../../stores/AuthStore';\nimport PublicChatStore from '../../stores/PublicChatStore';\nimport Loading from '../Loading/Loading';\nimport Routes from '../Routes/Routes';\nimport 'onsenui/css/onsenui.css';\nimport 'onsenui/css/onsen-css-components.css';\nimport 'firebase/app';\nimport \"firebase/auth\";\nimport \"firebase/storage\";\nimport \"firebase/database\";\nimport \"firebase/firestore\";\n\nons.platform.select('android');\nregister('nl', nlLocale);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isAuthenticated: AuthStore.isAuthenticated,\n      userHasAuthenticated: AuthStore.userHasAuthenticated,\n      user: AuthStore.user\n    };\n\n    AuthStore.on('change', this.handleAnyStoreChange);\n    PublicChatStore.on('change', this.handleAnyStoreChange);\n  }\n\n  componentWillUnmount() {\n    AuthStore.removeListener('change', this.handleAnyStoreChange);\n    PublicChatStore.removeListener('change', this.handleAnyStoreChange);\n  }\n\n  handleAnyStoreChange = () => {\n    if (this.state.userHasAuthenticated !== AuthStore.userHasAuthenticated\n      || this.state.isAuthenticated !== AuthStore.isAuthenticated) {\n\n      this.setState({\n        userHasAuthenticated: AuthStore.userHasAuthenticated,\n        isAuthenticated: AuthStore.isAuthenticated\n      });\n    }\n  }\n\n  render() {\n    const childProps = {\n      isAuthenticated: this.state.isAuthenticated,\n      userHasAuthenticated: this.state.userHasAuthenticated\n    };\n\n    console.log(childProps);\n\n    return (\n      <div className=\"App\">\n        {this.state.userHasAuthenticated ? <HashRouter>\n          <Routes childProps={childProps} />\n        </HashRouter> : <Loading />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import { firebaseReady } from \"./authentication\";\r\nimport AuthStore from \"../stores/AuthStore\";\r\nimport defaultAvatar from '../images/img_avatar.png';\r\n\r\nexport const getProfileImage = async userUid => {\r\n    const firebase = await firebaseReady;\r\n    try {\r\n        const ref = await firebase.storage().ref('/users/' + userUid + '/profile-picture.jpg')\r\n        const url = await ref.getDownloadURL();\r\n        return url;\r\n    } catch (err) {\r\n        // most likely 404.\r\n        // resolve this with the default avatar url\r\n        return defaultAvatar;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * @callback onProgress\r\n * @param {number} progress - Progress in percentages\r\n * @param {number} bytesTransferred\r\n * @param {number} totalBytes\r\n */\r\n\r\n/**\r\n * @param {string} uid - User's firebase uid\r\n * @param {File} file - the avatar image file to upload\r\n * @param {string} contentType - The content type of the image e.g: 'image/jpeg'\r\n * @param {onProgress} onProgress - Gets called every time the profile image upload progresses\r\n */\r\nexport const uploadProfilePicture = (userUid, file, onProgress) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebaseReady.then(firebase => {\r\n\r\n            const ref = firebase.storage().ref(`/users/${userUid}/profile-picture.jpg`)\r\n            const uploadTask = ref.put(file, { contentType: 'image/jpeg' });\r\n            uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'\r\n                function (snapshot) {\r\n                    // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\r\n                    var progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n                    console.log('Upload is ' + progress + '% done');\r\n                    if (onProgress) onProgress(progress, snapshot.bytesTransferred, snapshot.totalBytes);\r\n                }, function (error) {\r\n                    reject(error);\r\n                }, function () {\r\n                    uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {\r\n                        resolve(downloadURL);\r\n                        AuthStore.setPhotoURL(downloadURL);\r\n                        console.log('File available at', downloadURL);\r\n                    });\r\n                });\r\n        });\r\n    });\r\n};\r\n\r\nexport const getDisplayName = () => {\r\n    const authStoreUserDataDisplayName = AuthStore.userData\r\n        && AuthStore.userData.public\r\n        && AuthStore.userData.public.displayName;\r\n    const userAuthDisplayName = (!AuthStore.user\r\n        || AuthStore.user.displayName === undefined\r\n        || AuthStore.user.displayName === null) === false\r\n        && AuthStore.user.displayName;\r\n\r\n    return authStoreUserDataDisplayName || userAuthDisplayName || 'Anonymous';\r\n}\r\n\r\n\r\n","import { firebaseReady } from '../authentication';\r\n\r\nexport class ChatMeta {\r\n    constructor(title, isLeaf, slug, id) {\r\n        this.title = title;\r\n        this.isLeaf = isLeaf;\r\n        this.slug = slug;\r\n        this.id = id;\r\n    }\r\n}\r\n","import { ChatMeta } from \"./chat-meta\";\r\n\r\nexport class ChatThread extends ChatMeta {\r\n    constructor(title, slug, id, isLeaf, threadObserver) {\r\n        super(title, isLeaf, slug, id);\r\n        this.threadObserver = threadObserver;\r\n    }\r\n\r\n    static fromChatMeta(chatMeta, threadObserver) {\r\n        return new ChatThread(\r\n            chatMeta.title,\r\n            chatMeta.slug,\r\n            chatMeta.id,\r\n            chatMeta.isLeaf,\r\n            threadObserver);\r\n    }\r\n}"],"sourceRoot":""}