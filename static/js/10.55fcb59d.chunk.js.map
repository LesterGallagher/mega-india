{"version":3,"sources":["components/PersonalChatsList/PersonalChatsListItem/PersonalChatsListItem.js","components/PersonalChatsList/PersonalChatsList.js","lib/chats/personal-chat-list-item.js","components/PersonalChatsOverview/PersonalChatsOverview.js","components/NavbarMenuIcon/NavbarMenuIcon.module.css","components/NavbarMenuIcon/NavbarMenuIcon.js","components/ToolbarNormal/ToolbarNormal.js","stores/PersonalChatStore.js","components/PersonalChatsList/PersonalChatsListItem/PersonalChatsListItem.module.css"],"names":["PersonalChatsListItem","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","componentDidMount","asyncToGenerator","regenerator_default","a","mark","_callee","chatItem","profileImage","wrap","_context","prev","next","personalChatPromise","sent","setState","chatItemLoaded","getProfileImage","uid","profileImageLoaded","stop","onClick","_callee2","_context2","history","push","concat","state","userPublicData","src","alt","displayName","react_default","createElement","react_onsenui","tappable","modifier","className","width","height","styles","greyDisplayName","Component","withRouter","PersonalChatsList","renderListItem","item","key","PersonalChatsList_PersonalChatsListItem_PersonalChatsListItem","personalChatPromises","map","PersonalChatListItem","blocked","create","personalChatInfo","firebase","database","ref","once","abrupt","val","PersonalChatsOverview","personalChats","ready","AuthStore","readyPromise","PersonalChatStore","getAllPersonalChats","chatInfo","console","log","renderToolbar","ToolbarNormal","name","style","marginLeft","padding","components_PersonalChatsList_PersonalChatsList","module","exports","svg","middleBar","NavbarMenuIcon","viewBox","d","handleMenuClick","window","toggleOnsMenu","render","components_NavbarMenuIcon_NavbarMenuIcon","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","init","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","D_Apps_projectmegaindia_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","getChatsMetas","chatMeta","isReady","emit","getChatMetaIds","getField","_ref3","_callee3","id","snapshot","_context3","_x","_x2","apply","arguments","getSingleChatMeta","_ref4","_callee4","_ref5","_ref6","title","slug","isLeaf","_context4","Promise","all","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","ChatMeta","_x3","getChatMetaItem","otherUidSlug","myUid","user","uid1","uid2","trySetChatToUserData","_callee5","ids","_context5","getChatSubjectsFlat","_callee6","_context6","slice","sort","amountOfSlashesSort","getChatSubjects","_callee7","subjectsArray","subjects","_context7","forEach","subject","nestChatSubject","getChatThread","_ref10","_callee8","chatThread","_context8","Error","threads","ChatThread","fromChatMeta","_x4","_callee9","chats","_context9","isAuthenticated","keys","chat","filter","_ref12","_callee10","otherUserUid","_context10","set","_x5","setTimeout","_callee11","_context11","t0","t1","AbstractChatStore","__webpack_exports__"],"mappings":"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","file":"static/js/10.55fcb59d.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport styles from './PersonalChatsListItem.module.css';\nimport { getProfileImage } from '../../../lib/user';\nimport { List, ListItem } from 'react-onsenui';\nimport { withRouter } from 'react-router-dom';\n\nconst greyImgURI = 'data:image/png;base64,iVBORw0KGgoAAAAN'\n    + 'SUhEUgAAADIAAAAyAQMAAAAk8RryAAAAA1BMVEWZmZl86KQWAAA'\n    + 'ADklEQVQY02NgGAWDCQAAAZAAAcWb20kAAAAASUVORK5CYII=';\n\nclass PersonalChatsListItem extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n        };\n\n    }\n\n    componentDidMount = async () => {\n        const chatItem = await this.props.personalChatPromise;\n        this.setState({\n            chatItem: chatItem,\n            chatItemLoaded: true\n        });\n        const profileImage = await getProfileImage(chatItem.uid);\n        this.setState({\n            profileImage: profileImage,\n            profileImageLoaded: true\n        });\n    }\n\n    componentWillUnmount() {\n    }\n\n    onClick = async () => {\n        await this.props.personalChatPromise;\n        this.props.history.push(`/chats/personal/${this.state.chatItem.uid}`);\n    }\n\n    render() {\n        const chatItemLoaded = this.state.chatItemLoaded;\n        const chatItem = this.state.chatItem || {};\n        const userPublicData = chatItem.userPublicData || {};\n        const src = this.state.profileImage || greyImgURI;\n        const alt = (userPublicData.displayName || 'User') + ' avatar';\n\n        return (\n            <ListItem tappable\n                modifier=\"chevron\"\n                className=\"PersonalChatsListItem\"\n                onClick={this.onClick}>\n                <div className=\"left\">\n                    <img width=\"50\" height=\"50\"\n                        className=\"list-item__thumbnail\"\n                        alt={alt}\n                        src={src} />\n                </div>\n                <div className=\"center\">\n                    <div className={chatItemLoaded ? null : styles.greyDisplayName}>\n                        {userPublicData.displayName || 'Anonymous'}\n                    </div>\n                </div>\n                <div className=\"right\">\n\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nexport default withRouter(PersonalChatsListItem);\n","import React, { Component } from 'react';\nimport './PersonalChatsList.css';\nimport { List, ListItem } from 'react-onsenui';\nimport PersonalChatsListItem from './PersonalChatsListItem/PersonalChatsListItem';\n\nclass PersonalChatsList extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n\n        };\n\n    }\n\n    componentWillMount() {\n    }\n\n    componentWillUnmount() {\n    }\n\n    renderListItem = (item, key) => {\n        return (\n            <PersonalChatsListItem personalChatPromise={item} key={key} />\n        );\n    }\n\n    render() {\n        if (!this.props.personalChatPromises) return null;\n        return (\n            <div className=\"PersonalChatsList\">\n                <List>\n                    {this.props.personalChatPromises.map(this.renderListItem)}\n                </List>\n            </div>\n        );\n    }\n}\n\nexport default PersonalChatsList;\n","import firebase from '../../lib/firebase';\r\n\r\nexport default class PersonalChatListItem {\r\n    constructor(uid, blocked, userPublicData) {\r\n        this.uid = uid;\r\n        this.blocked = blocked;\r\n        this.userPublicData = userPublicData;\r\n    }\r\n\r\n    static create = async (personalChatInfo) => {\r\n        const uid = personalChatInfo.uid;\r\n        const blocked = personalChatInfo.blocked;\r\n        const userPublicData = await firebase.database().ref(`/users/${uid}/public`)\r\n            .once('value');\r\n        return new PersonalChatListItem(uid, blocked, userPublicData.val());\r\n    }\r\n}\r\n","import React, { Component } from 'react';\nimport { Card, Page } from 'react-onsenui';\nimport './PersonalChatsOverview.css';\nimport PersonalChatsList from '../PersonalChatsList/PersonalChatsList';\nimport PersonalChatStore from '../../stores/PersonalChatStore';\nimport firebase from '../../lib/firebase';\nimport PersonalChatListItem from '../../lib/chats/personal-chat-list-item';\nimport ToolbarNormal from '../ToolbarNormal/ToolbarNormal';\nimport AuthStore from '../../stores/AuthStore';\n\nclass PersonalChatsOverview extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n        };\n\n    }\n\n    componentDidMount = async () => {\n        await firebase.ready;\n        await AuthStore.readyPromise;\n        const personalChats = await PersonalChatStore.getAllPersonalChats();\n        this.setState({\n            personalChatPromises: personalChats.map(chatInfo => PersonalChatListItem.create(chatInfo))\n        }, console.log);\n    }\n\n    componentWillUnmount() {\n    }\n\n    render() {\n        return (\n            <Page className=\"PersonalChatsOverview\" renderToolbar={() => <ToolbarNormal name=\"Chats overzicht\" />}>\n                <h2 style={{ marginLeft: 10 }}>Chats overzicht</h2>\n                <Card style={{ padding: 0 }}>\n                    <PersonalChatsList personalChatPromises={this.state.personalChatPromises} />\n                </Card>\n            </Page>\n        );\n    }\n}\n\nexport default PersonalChatsOverview;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"svg\":\"NavbarMenuIcon_svg__lO4v7\",\"middleBar\":\"NavbarMenuIcon_middleBar__7DEMy\"};","import React, {Component} from 'react';\r\nimport styles from './NavbarMenuIcon.module.css'\r\n\r\nclass NavbarMenuIcon extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {  }\r\n    }\r\n    render() { \r\n        return (\r\n            <svg className={styles.svg} viewBox=\"0 0 512 512\">\r\n                <path className={styles.middleBar} d=\"M491.318,235.318H20.682C9.26,235.318,0,244.577,0,256s9.26,20.682,20.682,20.682h470.636\r\n                    c11.423,0,20.682-9.259,20.682-20.682C512,244.578,502.741,235.318,491.318,235.318z\"/>\r\n                <path d=\"M491.318,78.439H20.682C9.26,78.439,0,87.699,0,99.121c0,11.422,9.26,20.682,20.682,20.682h470.636\r\n                    c11.423,0,20.682-9.26,20.682-20.682C512,87.699,502.741,78.439,491.318,78.439z\"/>\r\n                <path d=\"M491.318,392.197H20.682C9.26,392.197,0,401.456,0,412.879s9.26,20.682,20.682,20.682h470.636\r\n                    c11.423,0,20.682-9.259,20.682-20.682S502.741,392.197,491.318,392.197z\"/>\r\n            </svg>\r\n        );\r\n    }\r\n}\r\n \r\nexport default NavbarMenuIcon;","import React, {Component} from 'react';\r\nimport { Page, Toolbar, Button, ToolbarButton, Icon } from 'react-onsenui';\r\nimport NavbarMenuIcon from '../NavbarMenuIcon/NavbarMenuIcon';\r\n\r\nclass ToolbarNormal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {}\r\n    }\r\n\r\n    handleMenuClick = () => {\r\n        window.toggleOnsMenu();\r\n    }\r\n\r\n    render = () => {\r\n        \r\n        return (<Toolbar>\r\n            <div className=\"left\">\r\n                <ToolbarButton onClick={this.handleMenuClick} className=\"menu-toolbar-btn\">\r\n                    <NavbarMenuIcon />\r\n                </ToolbarButton>\r\n            </div>\r\n            <div className=\"center\">{this.props.name}</div>\r\n        </Toolbar>);\r\n    }\r\n}\r\n\r\nexport default ToolbarNormal;\r\n","import { EventEmitter } from \"events\";\r\nimport { ChatMeta } from \"../lib/chats/chat-meta\";\r\nimport { ChatThread } from \"../lib/chats/chat-thread\";\r\nimport AbstractChatStore from \"./AbstractChatStore\";\r\nimport AuthStore from \"./AuthStore\";\r\nimport firebase from '../lib/firebase';\r\n\r\nclass PersonalChatStore extends AbstractChatStore {\r\n    constructor() {\r\n        super();\r\n\r\n        this.threads = {};\r\n        this.init();\r\n\r\n        setTimeout(async () => {\r\n            console.log(await this.getAllPersonalChats());\r\n        }, 3000);\r\n    }\r\n\r\n    init = async () => {\r\n        this.chatMeta = await this.getChatsMetas();\r\n        console.log(this.chatMeta);\r\n        this.isReady = true;\r\n        this.emit('change');\r\n    }\r\n\r\n    getChatMetaIds = async () => {\r\n        return [];\r\n    }\r\n\r\n    getField = async (id, key) => {\r\n        await firebase.ready;\r\n        const snapshot = await firebase.database().ref(`/chats/personal/${id}/${key}`).once('value');\r\n        return snapshot.val();\r\n    }\r\n\r\n    getSingleChatMeta = async (id) => {\r\n        await firebase.ready;\r\n        const [title, slug, isLeaf] = await Promise.all(\r\n            ['title', 'slug', 'isLeaf'].map(key => this.getField(id, key))\r\n        );\r\n        return new ChatMeta(title, isLeaf, slug, id);\r\n    }\r\n\r\n    getChatMetaItem = otherUidSlug => {\r\n        console.log('getChatMetaItem', otherUidSlug);\r\n        const myUid = AuthStore.user.uid;\r\n        const uid1 = myUid > otherUidSlug ? otherUidSlug : myUid;\r\n        const uid2 = myUid > otherUidSlug ? myUid : otherUidSlug;\r\n        this.trySetChatToUserData(otherUidSlug);\r\n        return {\r\n            \"title\": \"\",\r\n            \"isLeaf\": false,\r\n            \"slug\": otherUidSlug,\r\n            \"id\": `${uid1}/${uid2}`\r\n        };\r\n    }\r\n\r\n    getChatsMetas = async () => {\r\n        await firebase.ready;\r\n        const ids = await this.getChatMetaIds();\r\n        return await Promise.all(ids.map(this.getSingleChatMeta));\r\n    };\r\n\r\n    getChatSubjectsFlat = async () => {\r\n        const chatMeta = await this.getChatsMetas();\r\n        return chatMeta.slice().sort(this.amountOfSlashesSort);\r\n    };\r\n\r\n    getChatSubjects = async () => {\r\n        const subjectsArray = await this.getChatSubjectsFlat();\r\n        const subjects = [];\r\n        subjectsArray.forEach(subject => this.nestChatSubject(subject, subjects));\r\n        return subjects;\r\n    };\r\n\r\n    getChatThread = async chatMeta => {\r\n        if (chatMeta === null) throw new Error('Invalid chat meta');\r\n        if (this.threads[chatMeta.id]) return this.threads[chatMeta.id];\r\n        await firebase.ready;\r\n        const chatThread = ChatThread.fromChatMeta(chatMeta, firebase.database().ref(`/chats/personal/${chatMeta.id}/thread`));\r\n        this.threads[chatMeta.id] = chatThread;\r\n        return chatThread;\r\n    };\r\n\r\n    getAllPersonalChats = async () => {\r\n        await firebase.ready;\r\n        await AuthStore.readyPromise;\r\n        const loggedIn = AuthStore.isAuthenticated;\r\n        if (!loggedIn) return null;\r\n        const snapshot = await firebase.database()\r\n            .ref(`/users/${AuthStore.user.uid}/personalchatswithusers`)\r\n            .once('value');\r\n        const chats = snapshot.val() || {};\r\n        return Object.keys(chats).map(key => {\r\n            const chat = chats[key];\r\n            chat.uid = key;\r\n            return chat;\r\n        }).filter(chat => chat.blocked !== true);\r\n    }\r\n\r\n    trySetChatToUserData = async (otherUserUid) => {\r\n        await firebase.ready;\r\n        await AuthStore.readyPromise;\r\n        const loggedIn = AuthStore.isAuthenticated;\r\n        if (!loggedIn) return false;\r\n        const snapshot = await firebase.database()\r\n            .ref(`/users/${AuthStore.user.uid}/personalchatswithusers/${otherUserUid}`)\r\n            .once('value');\r\n        if (snapshot.val() === null) {\r\n            await await firebase.database()\r\n                .ref(`/users/${AuthStore.user.uid}/personalchatswithusers/${otherUserUid}`)\r\n                .set({\r\n                    blocked: false\r\n                });\r\n            const snapshot2 = await firebase.database()\r\n                .ref(`/users/${otherUserUid}/personalchatswithusers/${AuthStore.user.uid}`)\r\n                .once('value');\r\n            if (snapshot2.val() === null) {\r\n                await await firebase.database()\r\n                    .ref(`/users/${otherUserUid}/personalchatswithusers/${AuthStore.user.uid}`)\r\n                    .set({\r\n                        blocked: false\r\n                    });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default new PersonalChatStore();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PersonalChatsListItem\":\"PersonalChatsListItem_PersonalChatsListItem__1gmLP\",\"greyDisplayName\":\"PersonalChatsListItem_greyDisplayName__3Reh7\"};"],"sourceRoot":""}