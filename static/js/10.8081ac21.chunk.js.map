{"version":3,"sources":["components/NavbarMenuIcon/NavbarMenuIcon.module.css","components/NavbarMenuIcon/NavbarMenuIcon.js","components/ToolbarNormal/ToolbarNormal.js","components/PersonalChatsList/PersonalChatsListItem/PersonalChatsListItem.module.css","components/PersonalChatsList/PersonalChatsListItem/PersonalChatsListItem.js","components/PersonalChatsList/PersonalChatsList.js","lib/chats/personal-chat-list-item.js","components/PersonalChatsOverview/PersonalChatsOverview.js","stores/PersonalChatStore.js"],"names":["module","exports","svg","middleBar","NavbarMenuIcon","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","react_default","a","createElement","className","styles","viewBox","d","Component","ToolbarNormal","handleMenuClick","window","toggleOnsMenu","render","react_onsenui","onClick","components_NavbarMenuIcon_NavbarMenuIcon","name","PersonalChatsListItem","greyDisplayName","componentDidMount","asyncToGenerator","regenerator_default","mark","_callee","chatItem","profileImage","wrap","_context","prev","next","personalChatPromise","sent","setState","chatItemLoaded","getProfileImage","uid","profileImageLoaded","stop","_callee2","_context2","history","push","concat","userPublicData","src","alt","displayName","tappable","modifier","width","height","withRouter","PersonalChatsList","renderListItem","item","key","PersonalChatsList_PersonalChatsListItem_PersonalChatsListItem","personalChatPromises","map","PersonalChatListItem","blocked","create","personalChatInfo","firebase","database","ref","once","abrupt","val","PersonalChatsOverview","personalChats","firebaseReady","AuthStore","readyPromise","PersonalChatStore","getAllPersonalChats","chatInfo","console","log","renderToolbar","style","marginLeft","padding","components_PersonalChatsList_PersonalChatsList","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","init","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","D_Apps_projectmegaindia_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","getChatsMetas","chatMeta","isReady","emit","getChatMetaIds","getField","_ref3","_callee3","id","snapshot","_context3","_x","_x2","apply","arguments","getSingleChatMeta","_ref4","_callee4","_ref5","_ref6","title","slug","isLeaf","_context4","Promise","all","D_Apps_projectmegaindia_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","ChatMeta","_x3","getChatMetaItem","otherUidSlug","myUid","user","uid1","uid2","trySetChatToUserData","_callee5","ids","_context5","getChatSubjectsFlat","_callee6","_context6","slice","sort","amountOfSlashesSort","getChatSubjects","_callee7","subjectsArray","subjects","_context7","forEach","subject","nestChatSubject","getChatThread","_ref10","_callee8","chatThread","_context8","Error","threads","ChatThread","fromChatMeta","_x4","_callee9","chats","_context9","isAuthenticated","keys","chat","filter","_ref12","_callee10","otherUserUid","_context10","set","_x5","setTimeout","_callee11","_context11","t0","t1","AbctractChatStore","__webpack_exports__"],"mappings":"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","file":"static/js/10.8081ac21.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"svg\":\"NavbarMenuIcon_svg__lO4v7\",\"middleBar\":\"NavbarMenuIcon_middleBar__7DEMy\"};","import React, {Component} from 'react';\r\nimport styles from './NavbarMenuIcon.module.css'\r\n\r\nclass NavbarMenuIcon extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {  }\r\n    }\r\n    render() { \r\n        return (\r\n            <svg className={styles.svg} viewBox=\"0 0 512 512\">\r\n                <path className={styles.middleBar} d=\"M491.318,235.318H20.682C9.26,235.318,0,244.577,0,256s9.26,20.682,20.682,20.682h470.636\r\n                    c11.423,0,20.682-9.259,20.682-20.682C512,244.578,502.741,235.318,491.318,235.318z\"/>\r\n                <path d=\"M491.318,78.439H20.682C9.26,78.439,0,87.699,0,99.121c0,11.422,9.26,20.682,20.682,20.682h470.636\r\n                    c11.423,0,20.682-9.26,20.682-20.682C512,87.699,502.741,78.439,491.318,78.439z\"/>\r\n                <path d=\"M491.318,392.197H20.682C9.26,392.197,0,401.456,0,412.879s9.26,20.682,20.682,20.682h470.636\r\n                    c11.423,0,20.682-9.259,20.682-20.682S502.741,392.197,491.318,392.197z\"/>\r\n            </svg>\r\n        );\r\n    }\r\n}\r\n \r\nexport default NavbarMenuIcon;","import React, {Component} from 'react';\r\nimport { Page, Toolbar, Button, ToolbarButton, Icon } from 'react-onsenui';\r\nimport NavbarMenuIcon from '../NavbarMenuIcon/NavbarMenuIcon';\r\n\r\nclass ToolbarNormal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {}\r\n    }\r\n\r\n    handleMenuClick = () => {\r\n        window.toggleOnsMenu();\r\n    }\r\n\r\n    render = () => {\r\n        \r\n        return (<Toolbar>\r\n            <div className=\"left\">\r\n                <ToolbarButton onClick={this.handleMenuClick} className=\"menu-toolbar-btn\">\r\n                    <NavbarMenuIcon />\r\n                </ToolbarButton>\r\n            </div>\r\n            <div className=\"center\">{this.props.name}</div>\r\n        </Toolbar>);\r\n    }\r\n}\r\n\r\nexport default ToolbarNormal;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PersonalChatsListItem\":\"PersonalChatsListItem_PersonalChatsListItem__1gmLP\",\"greyDisplayName\":\"PersonalChatsListItem_greyDisplayName__3Reh7\"};","import React, { Component } from 'react';\nimport styles from './PersonalChatsListItem.module.css';\nimport { getProfileImage } from '../../../lib/user';\nimport { List, ListItem } from 'react-onsenui';\nimport { withRouter } from 'react-router-dom';\n\nconst greyImgURI = 'data:image/png;base64,iVBORw0KGgoAAAAN'\n    + 'SUhEUgAAADIAAAAyAQMAAAAk8RryAAAAA1BMVEWZmZl86KQWAAA'\n    + 'ADklEQVQY02NgGAWDCQAAAZAAAcWb20kAAAAASUVORK5CYII=';\n\nclass PersonalChatsListItem extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n        };\n\n    }\n\n    componentDidMount = async () => {\n        const chatItem = await this.props.personalChatPromise;\n        this.setState({\n            chatItem: chatItem,\n            chatItemLoaded: true\n        });\n        const profileImage = await getProfileImage(chatItem.uid);\n        this.setState({\n            profileImage: profileImage,\n            profileImageLoaded: true\n        });\n    }\n\n    componentWillUnmount() {\n    }\n\n    onClick = async () => {\n        await this.props.personalChatPromise;\n        this.props.history.push(`/chats/personal/${this.state.chatItem.uid}`);\n    }\n\n    render() {\n        const chatItemLoaded = this.state.chatItemLoaded;\n        const chatItem = this.state.chatItem || {};\n        const userPublicData = chatItem.userPublicData || {};\n        const src = this.state.profileImage || greyImgURI;\n        const alt = (userPublicData.displayName || 'User') + ' avatar';\n\n        return (\n            <ListItem tappable\n                modifier=\"chevron\"\n                className=\"PersonalChatsListItem\"\n                onClick={this.onClick}>\n                <div className=\"left\">\n                    <img width=\"50\" height=\"50\"\n                        className=\"list-item__thumbnail\"\n                        alt={alt}\n                        src={src} />\n                </div>\n                <div className=\"center\">\n                    <div className={chatItemLoaded ? null : styles.greyDisplayName}>\n                        {userPublicData.displayName || 'Anonymous'}\n                    </div>\n                </div>\n                <div className=\"right\">\n\n                </div>\n            </ListItem>\n        );\n    }\n}\n\nexport default withRouter(PersonalChatsListItem);\n","import React, { Component } from 'react';\nimport './PersonalChatsList.css';\nimport { List, ListItem } from 'react-onsenui';\nimport PersonalChatsListItem from './PersonalChatsListItem/PersonalChatsListItem';\n\nclass PersonalChatsList extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n\n        };\n\n    }\n\n    componentWillMount() {\n    }\n\n    componentWillUnmount() {\n    }\n\n    renderListItem = (item, key) => {\n        return (\n            <PersonalChatsListItem personalChatPromise={item} key={key} />\n        );\n    }\n\n    render() {\n        if (!this.props.personalChatPromises) return null;\n        return (\n            <div className=\"PersonalChatsList\">\n                <List>\n                    {this.props.personalChatPromises.map(this.renderListItem)}\n                </List>\n            </div>\n        );\n    }\n}\n\nexport default PersonalChatsList;\n","import firebase from 'firebase/app';\r\n\r\nexport default class PersonalChatListItem {\r\n    constructor(uid, blocked, userPublicData) {\r\n        this.uid = uid;\r\n        this.blocked = blocked;\r\n        this.userPublicData = userPublicData;\r\n    }\r\n\r\n    static create = async (personalChatInfo) => {\r\n        const uid = personalChatInfo.uid;\r\n        const blocked = personalChatInfo.blocked;\r\n        const userPublicData = await firebase.database().ref(`/users/${uid}/public`)\r\n            .once('value');\r\n        return new PersonalChatListItem(uid, blocked, userPublicData.val());\r\n    }\r\n}\r\n","import React, { Component } from 'react';\nimport { Card, Page } from 'react-onsenui';\nimport './PersonalChatsOverview.css';\nimport PersonalChatsList from '../PersonalChatsList/PersonalChatsList';\nimport PersonalChatStore from '../../stores/PersonalChatStore';\nimport { firebaseReady } from '../../lib/authentication';\nimport PersonalChatListItem from '../../lib/chats/personal-chat-list-item';\nimport ToolbarNormal from '../ToolbarNormal/ToolbarNormal';\nimport AuthStore from '../../stores/AuthStore';\n\nclass PersonalChatsOverview extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n        };\n\n    }\n\n    componentDidMount = async () => {\n        await firebaseReady;\n        await AuthStore.readyPromise;\n        const personalChats = await PersonalChatStore.getAllPersonalChats();\n        this.setState({\n            personalChatPromises: personalChats.map(chatInfo => PersonalChatListItem.create(chatInfo))\n        }, console.log);\n    }\n\n    componentWillUnmount() {\n    }\n\n    render() {\n        return (\n            <Page className=\"PersonalChatsOverview\" renderToolbar={() => <ToolbarNormal name=\"Chats overzicht\" />}>\n                <h2 style={{ marginLeft: 10 }}>Chats overzicht</h2>\n                <Card style={{ padding: 0 }}>\n                    <PersonalChatsList personalChatPromises={this.state.personalChatPromises} />\n                </Card>\n            </Page>\n        );\n    }\n}\n\nexport default PersonalChatsOverview;\n","import { EventEmitter } from \"events\";\r\nimport { firebaseReady } from \"../lib/authentication\";\r\nimport { ChatMeta } from \"../lib/chats/chat-meta\";\r\nimport { ChatThread } from \"../lib/chats/chat-thread\";\r\nimport AbctractChatStore from \"./AbstractChatStore\";\r\nimport AuthStore from \"./AuthStore\";\r\n\r\nclass PersonalChatStore extends AbctractChatStore {\r\n    constructor() {\r\n        super();\r\n\r\n        this.threads = {};\r\n        this.init();\r\n\r\n        setTimeout(async () => {\r\n            console.log(await this.getAllPersonalChats());\r\n        }, 3000);\r\n    }\r\n\r\n    init = async () => {\r\n        this.chatMeta = await this.getChatsMetas();\r\n        console.log(this.chatMeta);\r\n        this.isReady = true;\r\n        this.emit('change');\r\n    }\r\n\r\n    getChatMetaIds = async () => {\r\n        return [];\r\n    }\r\n\r\n    getField = async (id, key) => {\r\n        const firebase = await firebaseReady;\r\n        const snapshot = await firebase.database().ref(`/chats/personal/${id}/${key}`).once('value');\r\n        return snapshot.val();\r\n    }\r\n\r\n    getSingleChatMeta = async (id) => {\r\n        await firebaseReady;\r\n        const [title, slug, isLeaf] = await Promise.all(\r\n            ['title', 'slug', 'isLeaf'].map(key => this.getField(id, key))\r\n        );\r\n        return new ChatMeta(title, isLeaf, slug, id);\r\n    }\r\n\r\n    getChatMetaItem = otherUidSlug => {\r\n        console.log('getChatMetaItem', otherUidSlug);\r\n        const myUid = AuthStore.user.uid;\r\n        const uid1 = myUid > otherUidSlug ? otherUidSlug : myUid;\r\n        const uid2 = myUid > otherUidSlug ? myUid : otherUidSlug;\r\n        this.trySetChatToUserData(otherUidSlug);\r\n        return {\r\n            \"title\": \"\",\r\n            \"isLeaf\": false,\r\n            \"slug\": otherUidSlug,\r\n            \"id\": `${uid1}/${uid2}`\r\n        };\r\n    }\r\n\r\n    getChatsMetas = async () => {\r\n        await firebaseReady;\r\n        const ids = await this.getChatMetaIds();\r\n        return await Promise.all(ids.map(this.getSingleChatMeta));\r\n    };\r\n\r\n    getChatSubjectsFlat = async () => {\r\n        const chatMeta = await this.getChatsMetas();\r\n        return chatMeta.slice().sort(this.amountOfSlashesSort);\r\n    };\r\n\r\n    getChatSubjects = async () => {\r\n        const subjectsArray = await this.getChatSubjectsFlat();\r\n        const subjects = [];\r\n        subjectsArray.forEach(subject => this.nestChatSubject(subject, subjects));\r\n        return subjects;\r\n    };\r\n\r\n    getChatThread = async chatMeta => {\r\n        if (chatMeta === null) throw new Error('Invalid chat meta');\r\n        if (this.threads[chatMeta.id]) return this.threads[chatMeta.id];\r\n        const firebase = await firebaseReady;\r\n        const chatThread = ChatThread.fromChatMeta(chatMeta, firebase.database().ref(`/chats/personal/${chatMeta.id}/thread`));\r\n        this.threads[chatMeta.id] = chatThread;\r\n        return chatThread;\r\n    };\r\n\r\n    getAllPersonalChats = async () => {\r\n        const firebase = await firebaseReady;\r\n        await AuthStore.readyPromise;\r\n        const loggedIn = AuthStore.isAuthenticated;\r\n        if (!loggedIn) return null;\r\n        const snapshot = await firebase.database()\r\n            .ref(`/users/${AuthStore.user.uid}/personalchatswithusers`)\r\n            .once('value');\r\n        const chats = snapshot.val() || {};\r\n        return Object.keys(chats).map(key => {\r\n            const chat = chats[key];\r\n            chat.uid = key;\r\n            return chat;\r\n        }).filter(chat => chat.blocked !== true);\r\n    }\r\n\r\n    trySetChatToUserData = async (otherUserUid) => {\r\n        const firebase = await firebaseReady;\r\n        await AuthStore.readyPromise;\r\n        const loggedIn = AuthStore.isAuthenticated;\r\n        if (!loggedIn) return false;\r\n        const snapshot = await firebase.database()\r\n            .ref(`/users/${AuthStore.user.uid}/personalchatswithusers/${otherUserUid}`)\r\n            .once('value');\r\n        if (snapshot.val() === null) {\r\n            await await firebase.database()\r\n                .ref(`/users/${AuthStore.user.uid}/personalchatswithusers/${otherUserUid}`)\r\n                .set({\r\n                    blocked: false\r\n                });\r\n            const snapshot2 = await firebase.database()\r\n                .ref(`/users/${otherUserUid}/personalchatswithusers/${AuthStore.user.uid}`)\r\n                .once('value');\r\n            if (snapshot2.val() === null) {\r\n                await await firebase.database()\r\n                    .ref(`/users/${otherUserUid}/personalchatswithusers/${AuthStore.user.uid}`)\r\n                    .set({\r\n                        blocked: false\r\n                    });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default new PersonalChatStore();\r\n"],"sourceRoot":""}